# 1장. 코틀린이란 무엇이며, 왜 필요한가?

## 1. 코틀린이란

- **자바 가상머신 플랫폼과 JVM 외의 다른 플랫폼에서 돌아가는 현대 프로그래밍 언어**.  
- **범용 언어**로 **간결하고 안전**하며 **실용적**이다.
- 잘 작동하는 **다른 언어의 아이디어를 포함**하면서 비동기 프로그래밍을 위한 **코루틴** 등 혁신적인 접근방법도 취한다.

### 1.1 코틀린 맛보기

```kotlin
data class Person(
    val name: String,
    val age: Int? = null
)

fun main() {
    val persons = listOf(
        Person("영희", age = 29),
        Person("철수"),
    )
    // 람다식
    val oldest = persons.maxBy {
        it.age ?: 0 // 널에 적용하는 엘비스 연산자
    }
    // 문자열 템플릿
    println("가장 나이가 많은 사람: $oldest")
}
```

위 코드에서 볼 수 있는 코틀린 특징:
- `data class`: equals, hashCode, toString 자동 생성
- `val`: 읽기 전용 변수 (Java의 final)
- `Int?`: 널이 될 수 있는 타입
- `?:`: 엘비스 연산자 (null이면 대체값)
- `maxBy { }`: 람다를 활용한 컬렉션 처리
- `$oldest`: 문자열 처리 템플릿

### 1.2 코틀린의 주요 특성

- 코틀린은 **다중 패러다임 언어**다.
- 코틀린은 **정적 타입 지정**언어로, 컴파일 시점에 많은 오류를 잡아낼 수 있다.
- 코틀린은 **객체지향 언어와 함수형 언어의 아이디어를 조합**하여 **우아한 코드 작성**과 **강력한 추상화**를 사용할 수 있게 지원한다.
- 비동기 코드를 작성할 수 있는 강력한 방법을 지원한다.

#### 1.2.1 코틀린 용례: 안드로이드, 서버, 자바가 실행되는 모든 곳, 그 외의 용도

- 코틀린은 **어느 한 문제 영역만을 해결하기 위한 언어가 아니고, 모든 과업에 있어 폭넓게 생산성을 향상**시켜준다
- 코틀린의 주목적은 현재 자바가 사용되고 있는 모든 용도에 적합하면서도 더 간결하고 생산적이며 안전한 대체 언어를 제공하는 것이다.
- 안드로이드 디바이스에서 실행되는 모바일 애플리케이션
- 서버상의 코드(웹 애플리케이션의 백엔드)

#### 1.2.2 정적 타입 지정으로 인해 코틀린 성능, 신뢰성, 유지 보수성이 모두 좋아진다.

- 코틀린은 정적 타입 지정 언어로, 모든 식의 타입을 컴파일 시점에 알 수 있다.
- 컴파일 시점에 문제를 발견함으로써 미리 방지할 수 있고, 개발 사이클의 앞쪽에서 일찍 문제를 해결할 수 있다.

정적 타입 지정의 구체적 장점:
- **성능**: 실행 시점에 어떤 메서드를 호출할지 알아내는 과정이 필요 없으므로 메서드 호출이 더 빠르다.
- **신뢰성**: 컴파일러가 프로그램의 정확성을 검증하기 때문에 실행 시 프로그램이 오류로 중단될 가능성이 낮아진다.
- **유지 보수성**: 코드에서 다루는 객체가 어떤 타입인지 알 수 있으므로 처음 보는 코드를 다룰 때도 쉽다.
- **도구 지원**: IDE가 타입 정보를 활용해 더 정확한 자동 완성, 리팩토링, 안전한 검색 등을 제공할 수 있다.

```kotlin
fun main() {
    // 변수 타입을 명시적으로 지정
    val x: Int = 1
    // 명시적으로 지정하지 않음
    val y = 1
    // nullable
    val z: String?

    println("x = $x y = $y")
}
```
- 코틀린은 y의 **변수타입이 `Int`임을 자동**으로 알아내는데, 이런 기능을 **타입 추론**이라 부른다.
- 코틀린은 **널이 될 수 있는 타입을 지원**한다. 변수뒤에 `?`을 붙여주며 되며 이를 지원함에 따라 널 포인터 예외가 발생하는지 여부를 **컴파일 시점에 검사**할 수 있다.

#### 1.2.3 함수형 프로그래밍과 객체지향 프로그래밍의 조합이 코틀린을 안전하고 유연하게 한다.

코틀린은 **다중 패러다임 언어**로 객체지향 접근 방식과 함수형 스타일을 엮어 제공한다.  
함수형 프로그래밍의 핵심 개념은 아래와 같다.

- **일급 시민인 함수**
  - 함수를 일반 값처럼 다룰 수 있다.
  - 함수를 변수에 저장할 수 있고, 함수를 인자로 다른 함수에 전달할 수 있다.
  - 함수에서 새로운 함수를 만들어서 반환할 수 있다.
- **불변성**
  - 만들어지고 나면 내부 상태가 절대로 바뀌지 않는 불변 객체를 사용해 프로그램을 작성한다.
- **부수 효과 없음**
  - 함수형 프로그래밍에서는 입력이 같으면 항상 같은 출력을 내놓는다.
  - 다른 객체의 상태를 변경하지 않으며, 함수 외부나 다른 바깥 환경과 상호작용하지 않는 **순수 함수**를 사용한다.

함수형 프로그래밍의 장점은 아래와 같다.

- **코드 중복 방지**: 공통 로직을 람다로 추출하여 재사용할 수 있다. (예: 컬렉션의 `filter`, `map` 등)
- **안전한 동시성**: 불변 객체와 순수 함수를 사용하면 여러 스레드가 같은 데이터를 변경하지 않으므로 동기화 없이도 안전하다.
- **테스트 용이**: 순수 함수는 입력이 같으면 항상 같은 결과를 반환하므로, 별도의 환경 설정 없이 독립적으로 테스트할 수 있다.
